---
title: "Modul 3: Authentication dan Messaging"
description: "Belajar autentikasi pengguna, route guard, dan push notification (FCM) di Flutter dengan GetX."
---

## 1. Pengantar Authentication di Aplikasi Mobile

Authentication adalah proses verifikasi identitas pengguna sebelum mengakses aplikasi. Umumnya meliputi:

- **Login**: Masuk ke aplikasi dengan username/email dan password.
- **Register**: Mendaftar akun baru.
- **Session**: Menyimpan status login pengguna.

---

## 2. Implementasi Authentication Sederhana

### 2.1. Model User

```dart
class User {
  final String email;
  final String token;

  User({required this.email, required this.token});

  factory User.fromJson(Map<String, dynamic> json) {
    return User(
      email: json['email'],
      token: json['token'],
    );
  }
}
```

### 2.2. Controller Authentication dengan GetX

```dart
import 'package:get/get.dart';
import 'package:http/http.dart' as http;
import 'dart:convert';
import 'user.dart';

class AuthController extends GetxController {
  var user = Rxn<User>();
  var isLoading = false.obs;

  Future<void> login(String email, String password) async {
    isLoading.value = true;
    final response = await http.post(
      Uri.parse('https://reqres.in/api/login'),
      body: {'email': email, 'password': password},
    );
    if (response.statusCode == 200) {
      user.value = User.fromJson(json.decode(response.body));
      Get.offAllNamed('/home');
    } else {
      Get.snackbar('Error', 'Login gagal');
    }
    isLoading.value = false;
  }

  void logout() {
    user.value = null;
    Get.offAllNamed('/login');
  }
}
```

### 2.3. UI Login

```dart
import 'package:flutter/material.dart';
import 'package:get/get.dart';
import 'auth_controller.dart';

class LoginPage extends StatelessWidget {
  final AuthController c = Get.put(AuthController());
  final TextEditingController emailController = TextEditingController();
  final TextEditingController passwordController = TextEditingController();

  LoginPage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Login')),
      body: Center(
        child: Padding(
          padding: const EdgeInsets.all(16.0),
          child: Column(
            mainAxisAlignment: MainAxisAlignment.center,
            children: [
              TextField(
                controller: emailController,
                decoration: const InputDecoration(labelText: 'Email'),
              ),
              TextField(
                controller: passwordController,
                decoration: const InputDecoration(labelText: 'Password'),
                obscureText: true,
              ),
              const SizedBox(height: 20),
              Obx(() => c.isLoading.value
                  ? const CircularProgressIndicator()
                  : ElevatedButton(
                      onPressed: () => c.login(
                        emailController.text,
                        passwordController.text,
                      ),
                      child: const Text('Login'),
                    )),
            ],
          ),
        ),
      ),
    );
  }
}
```

---

## 3. Route Guard dengan GetX

Untuk membatasi akses halaman hanya untuk user yang sudah login.

```dart
import 'package:get/get.dart';
import 'auth_controller.dart';

class AuthMiddleware extends GetMiddleware {
  @override
  RouteSettings? redirect(String? route) {
    final auth = Get.find<AuthController>();
    if (auth.user.value == null) {
      return const RouteSettings(name: '/login');
    }
    return null;
  }
}
```

---

## 4. Pengantar Messaging

### 4.1. Push Notification

Push notification memungkinkan aplikasi menerima pesan dari server walaupun aplikasi tidak aktif. Layanan populer: **Firebase Cloud Messaging (FCM)**.

### 4.2. Instalasi FCM

Tambahkan pada `pubspec.yaml`:

```yaml
dependencies:
  firebase_core: ^2.10.0
  firebase_messaging: ^14.6.5
```

### 4.3. Inisialisasi Firebase

```dart
import 'package:firebase_core/firebase_core.dart';

void main() async {
  WidgetsFlutterBinding.ensureInitialized();
  await Firebase.initializeApp();
  runApp(const MyApp());
}
```

### 4.4. Setup Firebase Messaging

```dart
import 'package:firebase_messaging/firebase_messaging.dart';

class MessagingService {
  final FirebaseMessaging _fcm = FirebaseMessaging.instance;

  Future<void> init() async {
    NotificationSettings settings = await _fcm.requestPermission();
    String? token = await _fcm.getToken();
    print('FCM Token: $token');

    FirebaseMessaging.onMessage.listen((RemoteMessage message) {
      print('Pesan masuk: ${message.notification?.title}');
    });
  }
}
```

---

## 5. Studi Kasus: Notifikasi Sederhana

### 5.1. Inisialisasi di Main

```dart
void main() async {
  WidgetsFlutterBinding.ensureInitialized();
  await Firebase.initializeApp();
  MessagingService().init();
  runApp(const MyApp());
}
```

---

## 6. Referensi

- [GetX Auth Middleware](https://pub.dev/packages/get#route-management)
- [Firebase Messaging](https://firebase.flutter.dev/docs/messaging/overview)
- [Reqres API](https://reqres.in/)

---

**Dengan memahami authentication dan messaging, Anda dapat membangun aplikasi yang aman dan interaktif. Lanjutkan ke Modul 4 untuk mempelajari Sensor-driven Computing.**
